<script type="dojo/on" data-dojo-event="click" data-dojo-args="evt">

  require(
          ["dojo/dom", 
            "dojo/query",
            "dojo/dom-attr",
            "dojo/_base/xhr",
            "dojo/json",
            "dijit/registry",
            "dijit/Dialog",
            "dojo/NodeList-traverse",
            "dojo/NodeList-data"
          ],

  function(dom, query, domAttr, xhr, JSON, registry, Dialog){

//       var summaryTab = registry.byId('OPD_VISITS_CENTER_CP_TC_SUMMARY_CP');
//       var parentTab = registry.byId('OPD_VISITS_CENTER_CP_TC_SUMMARY_CP').getParent();
//       var visitTree = registry.byId('OPD_VISITS_LEADING_BC_TOP_CP_TREE');
//       editTab = registry.byId( domAttr.get(editTab, 'id') );
//       var visitHPIAddUrl = "{{visit_detail_obj.urls.add.visit_hpi}}";

      var editTab = query("#newVisitHPIEditForm_{{visit_hpi_obj.id}}").parents('.subTabContainer')[0];
      var getAllHpiUrl = "{{visit_detail_obj.get_all_visit_hpi_url}}";

      xhr.get({ url : getAllHpiUrl,
                load : function( html ){
                        registry.byId("editPatientDialog").set({ title: "Old History", content: html }).show();
        //                     publishInfo( jsondata.error_message );
        //                     summaryTab.set('href',"{{patient_detail_obj.urls.summary.visit}}");
        //                     visitTree.refresh();
        //                     parentTab.removeChild( editTab );
        //                     editTab.destroyRecursive();
        //                     registry.byId( domAttr.get(editTab,'id') ).set('href', jsondata.redirectUrl);

                      }
      });
  });

</script>