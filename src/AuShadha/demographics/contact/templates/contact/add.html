<div data-dojo-type = "dijit/form/Form" 
     id             = "newContactAddForm" 
     data-dojo-id   = "newContactAddForm"
     encType        = "multipart/form-data" 
     action         = "" 
     method         = "">

  <script type            = "dojo/method" 
          data-dojo-event = "onReset"
  >
    return true;
  </script>

  <script type            = "dojo/method" 
          data-dojo-event = "onSubmit"
          data-dojo-args  = "evt"
  >

    if(this.validate()){

        require([
                "dijit/registry", 
        ],
        
        function(registry){
      //    {% if perms.contact.add_contact %}
              addItem("{{patient_detail_obj.urls.add.contact}}", "newContactAddForm");
      //      addItem("{{patient_detail_obj.urls.add.contact}}", "newContactAddForm");
      //    {% else %}
              registry.byId("permissionDeniedErrorDialog").show();
      //    {% endif %}
      });

      return false;

      }

      else{
        raiseInvalidFormSubmission();
        return false;
      }

  </script>

    {% if perms.contact.add_contact %}
		<table>
			{{contact_form}}
		</table>
		<button 	type 	          = "submit" 
						  data-dojo-type  = "dijit/form/Button"
						  data-dojo-props = "iconClass:'dijitIconSave'"
					   	name 	          = "submitbutton" 
						  id 		          = "contact_form_submit"
						  value           = "Add">
		 Add
     <script type            = "dojo/connect" 
             data-dojo-event = "onClick" 
             data-dojo-args  = "evt"
     >
//       ADD_MORE_CONTACT = false;
       ADD_MORE_ITEMS           = false;
     </script>
		</button>

		<button 	type 	          = "submit" 
						  data-dojo-type  = "dijit/form/Button"
						  data-dojo-props = "iconClass:'dijitIconSave'"
					   	name 	          = "submitAndAddMoreButton" 
						  id 		          = "contact_form_add_more"
						  value           = "Add More">
		 Add More
     <script type            = "dojo/connect" 
             data-dojo-event = "onClick"
             data-dojo-args  = "evt"
     >
//      ADD_MORE_CONTACT = true;
      ADD_MORE_ITEMS           = true;
     </script>
		</button>

		<button 	type 	          = "reset" 
						  data-dojo-type  = "dijit/form/Button"
						  data-dojo-props = "iconClass:'dijitIconClear'"
						  id 		          = "contact_form_reset"
						  value           = "Reset">
		 Reset
		</button>
    {% else %}
      <p class="suggestion_text"> Insufficient Permissions to add contact </p>
    {%endif%}
</div>

