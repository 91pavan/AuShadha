require(["dijit/registry",
         "dojo/dom"      ,
         "dijit/form/Button",
         "dijit/form/DateTextBox",
         "dijit/form/TimeTextBox",
         "dijit/form/ValidationTextBox",
         "dojo/_base/array",
         "dojo/dom-class",
         "dojo/dom-construct",
         "dojo/dom-style"
         ],
function( registry,
           dom     , 
           Button  , 
           DateTextBox,
           TimeTextBox,
           ValidationTextBox,
           array            ,
           domClass         , 
           domConstruct     ,
           domStyle
         )
  {

  var leftCol = dijit.byId("leftCol");
  domStyle.set(leftCol.domNode,'height',"200px");
  array.forEach(
         dijit.findWidgets( dojo.byId("leftCol") ),
         function(e){
                 e.destroyRecursive()
         }
  );

  var DateBoxDiv1 = domConstruct.place("<input type='text' id='myDateBox1' value='2012-05-11'>","leftCol");
  var timeBoxDiv1 = domConstruct.place("<input type='text' id='myTimeBox1'>","leftCol");
  var DateBoxDiv2 = domConstruct.place("<input type='text' id='myDateBox2'>","leftCol");
  var timeBoxDiv2 = domConstruct.place("<input type='text' id='myTimeBox2'>","leftCol");
  var mybuttonDiv  = domConstruct.place("<button id='myButton'>","leftCol");

  var dateBox1    = new DateTextBox({value:'2012-05-11',
                                     onChange:function(){
                                                 dijit.
                                                   byId("myDateBox2").
                                                   set('value', this.value);
                                             }
                                     },
                                     'myDateBox1'
                                     )
  var timeBox1    = new TimeTextBox({
                                     onChange:function(){
                                                  dijit.
                                                     byId("myTimeBox2").
                                                     set('value', this.value);
                                             }
                    },
                    'myTimeBox1')

  var dateBox2    = new DateTextBox({disabled:true},'myDateBox2')
  var timeBox2    = new TimeTextBox({disabled:true},'myTimeBox2')

  var myButton   = new Button({label    : 'Copy', 
                                onClick  : function(){
                                                var date    = dijit.
                                                                 byId('myDateBox2').
                                                                 value.getDate();
                                                var month   = dijit.
                                                                 byId('myDateBox2').
                                                                 value.getMonth()+1; 
                                                var year    = dijit.
                                                                 byId('myDateBox2').
                                                                 value.getFullYear(); 
                                                var hours   = dijit.
                                                                 byId('myTimeBox2').
                                                                 value.getHours(); 
                                                var minutes = dijit.
                                                                 byId('myTimeBox2').
                                                                 value.getMinutes(); 
                                                var seconds = dijit.
                                                                 byId('myTimeBox2').
                                                                 value.getSeconds(); 
                                                var mseconds = dijit.
                                                                 byId('myTimeBox2').
                                                                 value.getMilliseconds(); 
                                                var newdate  = new Date( year,month,date,
                                                                         hours,minutes,
                                                                         seconds,mseconds
                                                                        ) 
                                                alert(newdate)
                                             }
                                 },
                                 'myButton'
                                )

  
})
